jQuery(document).ready(function(o){function e(){$is_valid=!0,o(".woocommerce-error,.woocommerce-message").remove();var e=o.trim(o("#coupon_manager_form").find("#title").val());return 0==e.length&&($is_valid=!1,o("#coupon_manager_form").prepend('<div class="woocommerce-error" tabindex="-1">'+coupon_manager_messages.no_title+"</div>"),o(".woocommerce-error").focus()),$is_valid}o("#frontend_coupon_manager_accordion").accordion({heightStyle:"content",collapsible:!0,activate:function(o,e){e.newHeader.hasClass("variations")&&resetVariationsAttributes()}}),o(".img_tip").each(function(){o(this).qtip({content:o(this).attr("data-desc"),position:{my:"center left",at:"center right",viewport:o(window)},show:{event:"mouseover",solo:!0},hide:{inactive:6e3,fixed:!0},style:{classes:"qtip-dark qtip-shadow qtip-rounded qtip-dc-css"}})}),o("#expiry_date").each(function(){o(this).datepicker({dateFormat:"yy-mm-d",changeMonth:!0,changeYear:!0})}),o("#product_ids").select2({placeholder:"Search for a product ..."}),o("#exclude_product_ids").select2({placeholder:"Search for a product ..."}),o("#product_categories").select2({placeholder:"Any category"}),o("#exclude_product_categories").select2({placeholder:"No categories"}),o("#coupon_manager_draft_button").click(function(r){if(r.preventDefault(),$is_valid=e(),$is_valid){o("#coupon_manager_form").block({message:null,overlayCSS:{background:"#fff",opacity:.6}});var a={action:"frontend_coupon_manager",coupon_manager_form:o("#coupon_manager_form").serialize(),status:"draft"};o.post(woocommerce_params.ajax_url,a,function(e){e&&($response_json=o.parseJSON(e),$response_json.status?window.location=$response_json.redirect:(o(".woocommerce-error,.woocommerce-message").remove(),o("#coupon_manager_form").prepend('<div class="woocommerce-error" tabindex="-1">'+$response_json.message+"</div>"),o(".woocommerce-error").focus()),$response_json.id&&o("#coupon_id").val($response_json.id),o("#coupon_manager_form").unblock())})}}),o("#coupon_manager_submit_button").click(function(r){if(r.preventDefault(),$is_valid=e(),$is_valid){o("#coupon_manager_form").block({message:null,overlayCSS:{background:"#fff",opacity:.6}});var a={action:"frontend_coupon_manager",coupon_manager_form:o("#coupon_manager_form").serialize(),status:"submit"};o.post(woocommerce_params.ajax_url,a,function(e){e&&($response_json=o.parseJSON(e),$response_json.status?window.location=$response_json.redirect:(o(".woocommerce-error,woocommerce-message").remove(),o("#coupon_manager_form").prepend('<div class="woocommerce-error" tabindex="-1">'+$response_json.message+"</div>"),o(".woocommerce-error").focus()),$response_json.id&&o("#coupon_id").val($response_json.id),o("#coupon_manager_form").unblock())})}})});